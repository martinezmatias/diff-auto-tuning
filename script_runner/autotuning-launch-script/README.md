
# Appendix of DAT (Diff-Auto-Tuning) 

## At Java runner parameters

```
@Option(names = "-out", required = true)
@Option(names = "-path", required = true)
@Option(names = "-subset", required = true)
@Option(names = "-begin")
@Option(names = "-stop", defaultValue = "10000000")
@Option(names = "-astmodel", required = false, defaultValue = "GTSPOON")
@Option(names = "-parallel", defaultValue = "true")
```


## Experiments:

There are two kinds of scripts.
1) The scripts that read the data (encoded in CSV) that DAT generates and generates summary of data (also in CSV) and/or plots.
In particular, DAT creates, for each diff file, two files:
a) one with the results of the execution of different diff algorithms with different configurations (example `nr_1_id_1_000056e_SingleAction_GTSPOON.csv`), 
b) some metrics (size of trees under comparision, execution time)  (example `metaInfo_nr_571_id_21_0c944315_Jukebox_GTSPOON.csv`) 

2) The scripts that consume data generated by the scripts previously mentioned.

## Scripts that consume and summarize raw data generated by DAT.

###  Main Basic Script

The script `ResultsAnalyzeDiffConfiguration.py` reads the csv generated by DAT and creates a single CSV file with the performance of each configuration on each file.
 
* It creates `distance_per_diff.csv` a matrix where the column are the configurations, the rows are the diff file and the cells are the distances

This script is very fast.


### Stats scripts

#### GridSearch

The script `ResultGridSearchKfoldValidation.py`  method `computeGridSearchKFold`
computes the grid search k-times.
The input is the `distance_per_diff.csv` previously computed.

#### HyperOpt

ResultsHyperOptDAT.py executes HyperOpt framework, in particular the TPE method.
The input is the `distance_per_diff.csv` previously computed.

###  Complete results

From `ResultsAnalyzeBestComplete.py`  the method `computeBestConfigurations` summarize the results.
It's an optional script. 
This is a heavy scripts, that can take several hours to execute.

* It creates a `best_configurations_summary.csv` file with the metrics of each configuration, including the number of time the config is the best.
Each  row is a configuration.
* It creates a `matrix_overlap_configs.csv` which contains the overlap of best between two configurations.
Each row and column is a configuration. Cells are the overlap.
* It creates `single_configs_[METRIC]PerConfiguration.csv`, where [METRIC] is a metric between time, size and height.
It stores measures (avg, median) for each metric.
* It creatres `single_parameter_[METRIC]PerConfiguration.csv` similar to the previous one, but each focus on a single parameter.
Each row summarizes all the configuration gaving a particular pair of hyperparameter and value.
* It creates `distance_per_diff.csv` a matrix where the column are the configurations, the rows are the diff file and the cells are the distances

### Relation Time and Size

Scripts `ResultsAnalyzeRelationTimeSize.py` computes the relation between time and size.
It produces two outputs: a) a csv that contains the regression line computed from the points(size, time) b) the plots (disable)

### Execution Times

Script `ResultsAnalyzeTimes.py` generates violing plots the results according to the execution times grouped by diff algorithms and  Megadiff group id.


# Script that consume and analyze generated summmary files (no row data)

## Position of default configuration

`ResultsReadCheckPositionDefault.py` returns the index of each default configuration.

## Relation of times between best and not best

`ResultsReadGeneratedFilesTimeComputer.py` analyzes the relation between the time of diff when a configuration is the best and when it's not the best.
It creates a plot `plot_time_best_X` and print the correlation between best and not best times found by a diff algorithm X.
The axe X are the configuration, sorted by best from left to write.

## Configuration

The file `DiffAlgorithmMetadata.py` contains the hyperparameters of each algorithm.


## Last results

### GTSpoon

Total diff 32647 total config 66926352
1443.085s

Total diff 24850 total config 50942500

